(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4107:(e,t,n)=>{Promise.resolve().then(n.bind(n,8052))},8052:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var s=n(5155),a=n(2115);let r=[{topic:"コンビニ敬語",question:"コンビニで「温めますか？」を敬語で言ってみて！",hint:"お客様に対する丁寧な表現を考えてみましょう",answer:"お温めいたしますか？",explanation:"「いたします」は謙譲語で、お客様に対する敬意を表現します"},{topic:"ファミレス敬語",question:"ファミレスで「お席にご案内します」の前に何て言う？",hint:"お客様をお迎えする最初の一言",answer:"いらっしゃいませ。お席にご案内いたします",explanation:"「いらっしゃいませ」でお迎えし、「ご案内いたします」で謙譲語を使用"},{topic:"電話敬語",question:"電話に出るとき「はい、○○です」じゃダメ？もっと丁寧に！",hint:"会社の代表として電話に出る場面",answer:"はい、○○でございます。いつもお世話になっております",explanation:"「でございます」は丁寧語の最上級、挨拶も加えてより丁寧に"},{topic:"エレベーター敬語",question:"エレベーターで上司に「お疲れ様」以外の挨拶は？",hint:"時間帯や状況に応じた敬語表現",answer:"お先に失礼いたします（帰宅時）/ おはようございます（朝）",explanation:"時間帯に応じて適切な挨拶を選び、謙譲語で敬意を表現"},{topic:"メール敬語",question:"メールで「ありがとうございました」より丁寧な表現は？",hint:"ビジネスメールでよく使われる感謝の敬語",answer:"誠にありがとうございました",explanation:"「誠に」を加えることで、より深い感謝の気持ちを表現"},{topic:"謝罪敬語",question:"「すみません」を超丁寧に言うと？",hint:"深くお詫びする場面での表現",answer:"申し訳ございません",explanation:"「申し訳ございません」は謙譲語で、最も丁寧な謝罪表現"}];function o(){let[e,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(""),[i,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{t([{id:"1",content:"敬語チャットへようこそ！\uD83C\uDF8C\n\n日常の面白い敬語ネタで練習しましょう！\n「ネタちょうだい」と言ってもらえれば、ランダムで敬語のお題を出しますよ〜",sender:"assistant",timestamp:new Date}])},[]);let g=()=>{let e=d.length>0?[...r,...d]:r;return e[Math.floor(Math.random()*e.length)]},p=async()=>{m(!0);try{let e=await fetch("/api/generate-topic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({existingTopics:[...r,...d].map(e=>e.topic)})});if(!e.ok)return g();{let t=await e.json();return c(e=>[...e,t]),t}}catch(e){return console.error("AI topic generation failed:",e),g()}finally{m(!1)}},b=async e=>{try{let t=await fetch("/api/score-keigo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userText:e,context:x?"トピック: ".concat(x.topic,", 質問: ").concat(x.question):"一般的な敬語表現"})});if(t.ok){let e=await t.json();return{isCorrect:e.isCorrect,category:e.category,score:e.score,explanation:e.explanation,suggestion:e.improvements.length>0?e.improvements.join(", "):void 0,examples:e.betterExpressions}}throw Error("AI scoring failed")}catch(o){console.error("AI keigo analysis failed, using fallback:",o);let t=e.includes("です")||e.includes("ます")||e.includes("ございます"),n=e.includes("いらっしゃる")||e.includes("なさる")||e.includes("お～になる")||e.includes("ご～になる"),s=e.includes("申し上げ")||e.includes("させていただ")||e.includes("伺")||e.includes("拝見"),a="普通語",r=50;return s?(a="謙譲語",r=85):n?(a="尊敬語",r=85):t&&(a="丁寧語",r=75),{isCorrect:t||n||s,category:a,score:r,explanation:"".concat(a,"が使われています！"),suggestion:r<70?"「です・ます」を使ってもう少し丁寧にしてみましょう":void 0}}},f=(e,n)=>{let s=e.toLowerCase();if(s.includes("ネタ")||s.includes("お題")||s.includes("問題")||s.includes("ちょうだい")){if(.3>Math.random()&&!u)return p().then(e=>{h(e);let n={id:(Date.now()+2).toString(),content:"\uD83E\uDD16 **AI生成トピック**\n\n【".concat(e.topic,"】\n\n").concat(e.question,"\n\n\uD83D\uDCA1 ").concat(e.hint),sender:"assistant",timestamp:new Date,topic:e};t(e=>[...e,n])}),"\uD83E\uDD16 AIが新しいトピックを考えています...";{let e=g();return h(e),"【".concat(e.topic,"】\n\n").concat(e.question,"\n\n\uD83D\uDCA1 ").concat(e.hint)}}if(s.includes("答え")||s.includes("正解")||s.includes("こたえ"))if(!x||!x.answer)return"答えを表示するには、まず「ネタちょうだい」でお題を出してもらってくださいね〜";else{let e="\uD83D\uDCA1 **正解は...**\n\n「".concat(x.answer,"」\n\n");return x.alternatives&&x.alternatives.length>0&&(e+="� **他の言い方**\n",x.alternatives.forEach((t,n)=>{e+="".concat(n+1,". 「").concat(t,"」\n")}),e+="\n"),x.category&&(e+="\uD83D\uDCDA **敬語の種類**: ".concat(x.category,"\n\n")),e+="�\uD83D\uDCDD **解説**\n".concat(x.explanation||"適切な敬語表現です！")}if(s.includes("こんにちは")||s.includes("はじめまして")||s.includes("よろしく"))return"こんにちは！敬語マスターを目指して一緒に頑張りましょう！\n\n「ネタちょうだい」と言ってもらえれば、面白い敬語のお題を出しますよ〜";if(n){let e="【敬語チェック結果】\n";return e+="種類: ".concat(n.category,"\n"),e+="スコア: ".concat(n.score,"点\n\n"),n.score>=80?e+="素晴らしい！完璧な敬語ですね！✨\n\n":n.score>=70?e+="いいですね！もう少しで完璧です！\uD83D\uDC4D\n\n":e+="もう少し丁寧にできそうですね\uD83D\uDCAA\n\n",n.suggestion&&(e+="\uD83D\uDCA1 アドバイス: ".concat(n.suggestion,"\n\n")),e+="他にも試してみませんか？「ネタちょうだい」でお題を出しますよ！"}return"なるほど〜！他にも敬語を試してみませんか？\n\n「ネタちょうだい」と言ってもらえれば新しいお題を出しますよ〜"},y=async()=>{if(!n.trim()||i)return;l(!0);let e={id:Date.now().toString(),content:n,sender:"user",timestamp:new Date},s=await b(n);s&&(e.analysis=s);let a=f(n,s),r={id:(Date.now()+1).toString(),content:a,sender:"assistant",timestamp:new Date};t(t=>[...t,e,r]),l(!1),o("")},w=e=>e>=90?"bg-emerald-100 text-emerald-800 border-emerald-200":e>=80?"bg-green-100 text-green-800 border-green-200":e>=70?"bg-yellow-100 text-yellow-800 border-yellow-200":e>=60?"bg-orange-100 text-orange-800 border-orange-200":"bg-red-100 text-red-800 border-red-200",v=e=>{switch(e){case"尊敬語":return"\uD83D\uDC51";case"謙譲語":return"\uD83D\uDE47‍♂️";case"丁寧語":return"\uD83D\uDE0A";case"普通語":return"\uD83D\uDE10";case"不適切":return"\uD83D\uDE05";default:return"❓"}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-4",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-3xl shadow-soft border border-white/20 overflow-hidden animate-fade-in",children:[(0,s.jsxs)("div",{className:"gradient-primary text-white p-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"}),(0,s.jsx)("div",{className:"relative z-10",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF8C"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"敬語チャット"}),(0,s.jsx)("p",{className:"text-white/90 text-lg",children:"AIと一緒に楽しく敬語を学ぼう"})]})]})}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"})]}),(0,s.jsxs)("div",{className:"h-96 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-white/50 to-slate-50/50",children:[e.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"," animate-slide-in"),style:{animationDelay:"".concat(.1*t,"s")},children:(0,s.jsxs)("div",{className:"flex items-start gap-3 max-w-[85%]",children:["assistant"===e.sender&&(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-sm",children:"\uD83E\uDD16"})}),(0,s.jsxs)("div",{className:"rounded-2xl px-4 py-3 shadow-soft ".concat("user"===e.sender?"bg-gradient-to-r from-blue-500 to-blue-600 text-white ml-auto":"bg-white/90 text-gray-800 border border-gray-100"),children:[(0,s.jsx)("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:e.content}),e.analysis&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-white/60 rounded-xl border border-white/40",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-lg",children:v(e.analysis.category)}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.analysis.category}),(0,s.jsxs)("span",{className:"text-sm font-bold px-2 py-1 rounded-full border ".concat(w(e.analysis.score)),children:[e.analysis.score,"点"]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 mt-2 space-y-2",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-2 rounded-lg",children:[(0,s.jsx)("span",{className:"font-medium",children:"\uD83D\uDCDD 解説:"})," ",e.analysis.explanation]}),e.analysis.suggestion&&(0,s.jsxs)("div",{className:"bg-orange-50 p-2 rounded-lg",children:[(0,s.jsx)("span",{className:"font-medium",children:"\uD83D\uDCA1 改善提案:"})," ",e.analysis.suggestion]}),e.analysis.examples&&e.analysis.examples.length>0&&(0,s.jsxs)("div",{className:"bg-green-50 p-2 rounded-lg",children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"✨ より良い表現例:"}),e.analysis.examples.map((e,t)=>(0,s.jsxs)("div",{className:"ml-2 text-green-700",children:["• ",e]},t))]})]})]}),(0,s.jsx)("div",{className:"text-xs opacity-60 mt-2",children:e.timestamp.toLocaleTimeString()})]}),"user"===e.sender&&(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-sm",children:"\uD83D\uDC64"})})]})},e.id)),i&&(0,s.jsx)("div",{className:"flex justify-start animate-pulse-soft",children:(0,s.jsx)("div",{className:"bg-white/90 rounded-2xl px-4 py-3 shadow-soft border border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"考え中..."})]})})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 p-6 bg-white/80 backdrop-blur-sm",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),placeholder:"敬語で話しかけてみて！「ネタちょうだい」でお題も出すよ〜",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/90 text-gray-800 placeholder-gray-500 transition-all duration-200",disabled:i}),(0,s.jsx)("button",{onClick:y,disabled:i||!n.trim(),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-soft hover:shadow-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium",children:"送信"})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4 flex-wrap",children:[(0,s.jsx)("button",{onClick:()=>o("ネタちょうだい"),className:"text-sm bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 px-3 py-2 rounded-full text-gray-700 transition-all duration-200 shadow-soft hover:shadow-medium border border-gray-200",children:"\uD83C\uDFB2 ネタちょうだい"}),(0,s.jsxs)("button",{onClick:async()=>{if(!u){l(!0);let e=await p();h(e);let n={id:Date.now().toString(),content:"\uD83E\uDD16 **AI生成トピック**\n\n【".concat(e.topic,"】\n\n").concat(e.question,"\n\n\uD83D\uDCA1 ").concat(e.hint),sender:"assistant",timestamp:new Date};t(e=>[...e,n]),l(!1)}},disabled:u||i,className:"text-sm bg-gradient-to-r from-purple-100 to-purple-200 hover:from-purple-200 hover:to-purple-300 px-3 py-2 rounded-full text-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-soft hover:shadow-medium border border-purple-200",children:["\uD83E\uDD16 AIトピック ",u?"生成中...":""]}),(0,s.jsx)("button",{onClick:()=>o("答え"),className:"text-sm bg-gradient-to-r from-green-100 to-green-200 hover:from-green-200 hover:to-green-300 px-3 py-2 rounded-full text-green-700 transition-all duration-200 shadow-soft hover:shadow-medium border border-green-200",children:"\uD83D\uDCA1 答えを見る"}),(0,s.jsx)("button",{onClick:()=>o("いつもお世話になっております"),className:"text-sm bg-gradient-to-r from-blue-100 to-blue-200 hover:from-blue-200 hover:to-blue-300 px-3 py-2 rounded-full text-blue-700 transition-all duration-200 shadow-soft hover:shadow-medium border border-blue-200",children:"\uD83D\uDCE7 ビジネス敬語"}),(0,s.jsx)("button",{onClick:()=>o("申し訳ございません"),className:"text-sm bg-gradient-to-r from-orange-100 to-orange-200 hover:from-orange-200 hover:to-orange-300 px-3 py-2 rounded-full text-orange-700 transition-all duration-200 shadow-soft hover:shadow-medium border border-orange-200",children:"\uD83D\uDE47‍♂️ 謝罪敬語"})]})]})]})})})}function i(){return(0,s.jsx)(o,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4107)),_N_E=e.O()}]);